{% extends 'AppBundle::layout.html.twig' %}

{% block content %}
    {% set locale = app.request.get('_locale') %}
    {% set total = 0 %}
    <div id="cart">
        <div class="row">
            <div class="col-xs-12">
                <div class="pull-left">
                    <p class="myCart">{{ "cart.my_cart"|trans }}
                        {% if  products|length > 0  %}
                            <span>({{ products|length }})</span>
                        {% else %}
                            is empty
                        {% endif %}

                    </p>
                </div>
                <div class="pull-right mt10">
                    <a href="{{ path('app_homepage') }}" class="backTo">{{ "cart.back_to_shop"|trans }}</a>
                </div>
            </div>
        </div>
        <hr class="grey">

        <div class="cartProducts row ml0 mr0">
            {% for product in products  %}
                {% set total = total + product.price %}
                <div id="cartProduct{{ product.id }}" class="col-xs-12 col-md-6 cartProduct">
                    <div class="col-md-4 cartProductLeft">
                        <a href="{{ path('app_single_product', { 'category': product.category.slug, 'slug': product.slug}) }}">
                            <img src="{% path product.image, "big" %}" alt="Product" class="img-responsive">
                        </a>
                    </div>
                    <div class="col-md-5 cartProductCenter">
                        <a href="{{ path('app_single_product', { 'category': product.category.slug, 'slug': product.slug}) }}">
                            {% if locale == 'en' %}
                                {{ product.titleEng }}
                            {% elseif locale == 'ru' %}
                                {{ product.titleRus }}
                            {% elseif locale == 'am' %}
                                {{ product.titleArm }}
                            {% endif %}
                        </a>

                        <div class="cartProductPrice">
                            <div class="pull-left">
                                <p>{{ "cart.price"|trans|upper }}</p>
                            </div>
                            <div class="pull-right">
                                <p>$ {{ product.price }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 cartProductRight">
                        <a href="javascript:void(0)" class="pull-right removeLink" onclick="removeFromCart({{ product.id }})">
                            <i class="fa fa-times fa-2x" aria-hidden="true"></i>
                        </a>
{#
                        <button class="btn btn-gold-white w100">Make an offer</button>
#}
                    </div>
                </div>
            {% endfor %}
        </div>
        <hr class="grey" style="margin-top: 27px;">
        <div class="row  ml0 mr0">
            <div class="col-md-2 pull-right cartTotalDiv">
                <p class="text-center cartTotal">{{ "cart.total"|trans }}: $ {{ total }} </p>
                <a href="{{ path('purchase') }}" class="btn btn-gold w100 {% if total == 0 %} disabled {% endif %}">{{ "product.purchase"|trans }}</a>
            </div>
        </div>
    </div>
{% endblock %}